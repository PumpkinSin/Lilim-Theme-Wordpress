{"version":3,"sources":["all.js","post.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["jQuery.rika_js = function () {\n    var methods = {\n        init: function () {\n            var postContent = jQuery('#post .column--invisible .post--item');\n            methods.triggerSearch(), methods.triggerMenu(), methods.triggerSubmenu(), methods.initial(postContent), methods.placeToolbar(960, 60, 20), methods.ajaxPostLoading(), methods.responsiveColumn(postContent), methods.menuScroll(), methods.upperDownClick(), methods.toolBarPlace(), methods.tagPost(), methods.ScrollMenuMobile(), methods.rippleEffect(), methods.filledField();\n        },\n        triggerSearch: function () {\n            jQuery('.js-search').on('click', function () {\n                jQuery('.header__search').addClass('show');\n                jQuery('.overlay-content').addClass('show');\n            });\n            jQuery('.header__search__close').on('click', function () {\n                jQuery('.header__search').removeClass('show');\n                jQuery('.overlay-content').removeClass('show');\n            });\n            jQuery('.overlay-content').on('click', function () {\n                jQuery('.header__search').removeClass('show');\n                jQuery('.overlay-content').removeClass('show');\n            });\n        },\n        triggerMenu: function () {\n            jQuery('.wrapper').on('click', function () {\n                jQuery('body').removeClass('nav-sidebar-open');\n            });\n            jQuery('.nav-main').on('click', function (e) {\n                e.stopPropagation();\n            });\n            jQuery('.js-nav-main').on('click', function () {\n                jQuery('body').toggleClass('nav-sidebar-open');\n                return false;\n            });\n        },\n        triggerSubmenu: function () {\n            jQuery('li.menu-item-has-children a').on('click', function (e) {\n                e.stopPropagation();\n                jQuery(this).siblings('.sub-menu').slideToggle();\n            });\n        },\n        initial: function (items) {\n            this.adjustColumnHeights(items);\n            jQuery('.column--post').addClass('stop--sliding');\n            setTimeout(function () {\n                jQuery('.pageload-overlay').removeClass('show');\n                jQuery('.container').removeClass('fading');\n            }, 150);\n\n        },\n        ajaxPostLoading: function () {\n            jQuery('#post').append('<div class=\"load-more\"><button class=\"button button--load-more\">Load More</button><button class=\"button button--loading\" style=\"display: none\">Loading</button></div>');\n            var button = jQuery('#post .load-more');\n            var page = 2;\n\n            jQuery('.button--load-more').on('click', function () {\n                jQuery.ajax({\n                    url: lilimajax.ajax_url,\n                    type: 'post',\n                    data: {\n                        action: 'ajax_pagination',\n                        query: lilimajax.query,\n                        page: page\n                    },\n                    beforeSend: function () {\n                        jQuery('.load-more .button--load-more').hide();\n                        jQuery('.load-more .button--loading').show();\n                    },\n                    success: function (html) {\n                        jQuery('#post .column--invisible').append(html.data);\n                        jQuery('#post').append(button);\n                        page = page + 1;\n                        methods.adjustColumnHeights(jQuery('#post .column--invisible .post--item'));\n                        methods.responsiveColumn(jQuery('#post .column--invisible .post--item'));\n                        jQuery('.load-more .button--load-more').show();\n                        jQuery('.load-more .button--loading').hide();\n                    }\n                });\n            });\n        },\n        responsiveColumn: function (items) {\n            jQuery(window).resize(function (o) {\n                var resize = true;\n                methods.adjustColumnHeights(items, resize);\n            });\n        },\n        adjustColumnHeights: function (items, flag) {\n            if (!flag || typeof flag === \"undefined\") {\n                flag = false;\n            }\n            if (flag) {\n                jQuery('.column--one').empty();\n                jQuery('.column--two').empty();\n                jQuery('.column--three').empty();\n            }\n            var newItems = items.clone();\n            var columns = [];\n            var getViewportWidth = function () {\n                return Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n            };\n            var gridLagerBreakpoint = 1420;\n            var gridSmallBreakpoint = 768;\n            columns.push(jQuery('.column--one'));\n            if (getViewportWidth() >= gridSmallBreakpoint) {\n                columns.push(jQuery('.column--two'));\n            }\n            if (getViewportWidth() >= gridLagerBreakpoint) {\n                columns.push(jQuery('.column--three'));\n            }\n            for (var i = 0; i < newItems.length; i++) {\n                if (!newItems.eq(i).hasClass('post--added') && !flag) {\n                    items.eq(i).addClass('post--added');\n                    this.getTargetColumn(columns).append(newItems.eq(i).removeClass('post--added'));\n                } else if (flag) {\n                    this.getTargetColumn(columns).append(newItems.eq(i).removeClass('post--added'));\n                }\n            }\n        },\n        getTargetColumn: function (columnList) {\n            var currentBestHeight = Number.MAX_VALUE;\n            for (var i = 0; i < columnList.length; i++) {\n                if (columnList[i].outerHeight() < currentBestHeight) {\n                    var bestColumn = columnList[i];\n                    currentBestHeight = columnList[i].outerHeight();\n                }\n            }\n            return bestColumn;\n        },\n\n        tagPost: function () {\n            jQuery(document).on('mouseenter', '.tag ul > li:first-child', function (event) {\n                event.stopPropagation();\n                jQuery(this).parents('ul').addClass('show');\n            });\n            jQuery(document).on('click', '.tag ul > li', function (event) {\n                event.stopPropagation();\n            });\n            jQuery(document).on('mouseleave', '.tag ul', function (event) {\n                event.stopPropagation();\n                jQuery(this).removeClass('show');\n            });\n        },\n\n        placeToolbar: function (wrap, a, b) {\n            var loli = parseInt((jQuery(window).width() - wrap + 1) / 2 - a - b);\n            if (loli < 20) {\n                loli = 20;\n            }\n            jQuery('.right-toolbar').css({\n                right: loli,\n                opacity: 1\n            });\n        },\n        menuScroll: function () {\n            jQuery(window).scroll(function (event) {\n                event.stopPropagation();\n                var scrollTop = jQuery(window).scrollTop();\n                if (scrollTop > 69) {\n                    jQuery('header.header').addClass('header--fixed');\n                } else {\n                    jQuery('header.header').removeClass('header--fixed');\n                }\n            })\n        },\n        toolBarPlace: function () {\n            var arrivedAtBottom = false;\n            jQuery(window).scroll(function (event) {\n                event.stopPropagation();\n                arrivedAtBottom = jQuery(window).scrollTop() >= jQuery(document).height() - jQuery(window).height();\n                if (arrivedAtBottom) {\n                    jQuery('.tooltip-goto').find('.icon-vertical_align_bottom').hide();\n                    jQuery('.tooltip-goto').find('.icon-vertical_align_top').show();\n                } else {\n                    jQuery('.tooltip-goto').find('.icon-vertical_align_top').hide();\n                    jQuery('.tooltip-goto').find('.icon-vertical_align_bottom').show();\n                }\n            })\n        },\n        upperDownClick: function () {\n            jQuery(document).on('click', '.right-toolbar .icon-vertical_align_top', function () {\n                jQuery('html, body').animate({scrollTop: 0}, 500);\n            });\n            jQuery(document).on('click', '.right-toolbar .icon-vertical_align_bottom', function () {\n                jQuery('html, body').animate({scrollTop: jQuery('#page-wrap').height()}, 500);\n            });\n            jQuery(document).on('click', '.right-toolbar .icon-question_answer', function () {\n                jQuery('html, body').animate({scrollTop: jQuery('#respond').position().top}, 500);\n            });\n            jQuery(document).on('click', '.right-toolbar .icon-bubble_chart', function () {\n                jQuery('html, body').animate({scrollTop: jQuery('.share').position().top}, 500);\n            });\n        },\n        ScrollMenuMobile: function () {\n            setTimeout(function () {\n                jQuery('.wrapper-nav').css('height', jQuery(window).height() + 'px')\n            }, 500)\n            jQuery(window).resize(function () {\n                setTimeout(function () {\n                    jQuery('.wrapper-nav').css('height', jQuery(window).height() + 'px')\n                }, 500)\n            });\n        },\n        setCookie: function (o, e) {\n            var i = new Date;\n            i.setTime(i.getTime() + 31536e6), document.cookie = o + '=' + e + ';path=/;expires=' + i.toUTCString()\n        },\n        rippleEffect: function () {\n            var jQueryripple = jQuery('.rika-ripple');\n\n            jQueryripple.on('click.ui.ripple', function (e) {\n\n                var jQuerythis = jQuery(this);\n                var jQueryoffset = jQuerythis.parent().offset();\n                var jQuerycircle = jQuerythis.find('.c-ripple__circle');\n\n                var x = e.pageX - jQueryoffset.left;\n                var y = e.pageY - jQueryoffset.top;\n\n                jQuerycircle.css({\n                    top: y + 'px',\n                    left: x + 'px'\n                });\n\n                jQuerythis.addClass('is-active');\n\n            });\n\n            jQueryripple.on('animationend webkitAnimationEnd oanimationend MSAnimationEnd', function (e) {\n                jQuery(this).removeClass('is-active');\n            });\n        },\n        filledField: function () {\n            var jQueryfield = jQuery('.rika-textfield');\n\n            jQueryfield.on('change', function () {\n                if (jQuery(this).children('input').val()) {\n                    if (!jQuery(this).children('input').hasClass('is-filled')) {\n                        jQuery(this).children('input').addClass('is-filled');\n                    }\n                } else {\n                    if (jQuery(this).children('input').hasClass('is-filled')) {\n                        jQuery(this).children('input').removeClass('is-filled');\n                    }\n                }\n            });\n        }\n    };\n    methods.init();\n};\n\n\nfunction grin(tag) {\n    var myField;\n    tag = ' ' + tag + ' ';\n    if (document.getElementById('comment') && document.getElementById('comment').type == 'textarea') {\n        myField = document.getElementById('comment')\n    } else {\n        return false\n    }\n    if (document.selection) {\n        myField.focus();\n        var sel = document.selection.createRange();\n        sel.text = tag;\n        myField.focus()\n    } else if (myField.selectionStart || myField.selectionStart == '0') {\n        var startPos = myField.selectionStart;\n        var endPos = myField.selectionEnd;\n        var cursorPos = endPos;\n        myField.value = myField.value.substring(0, startPos) + tag + myField.value.substring(endPos, myField.value.length);\n        cursorPos += tag.length;\n        myField.focus();\n        myField.selectionStart = cursorPos;\n        myField.selectionEnd = cursorPos\n    } else {\n        myField.value += tag;\n        myField.focus()\n    }\n}\n\n\njQuery(function () {\n    jQuery.rika_js();\n});\n","jQuery(document).ready(function () {\r\n    var input_search,\r\n            input_search = jQuery(\".js-search-input\"),\r\n            searchWrapper = jQuery(\".js-search-results\"),\r\n            delaySearch,\r\n            ajaxSearchContent;\r\n    var event_ajax_search = {\r\n        bind_event: function () {\r\n            input_search.bind('keyup',\r\n                    function (e) {\r\n                        if (input_search.val() != \"\") {\r\n                            if (delaySearch) {\r\n                                clearTimeout(delaySearch)\r\n                            }\r\n                            delaySearch = setTimeout(startSearch, 500);\r\n                        } else if (input_search.val() == \"\") {\r\n                            searchWrapper.empty().hide();\r\n                        }\r\n                    })\r\n        },\r\n        unbind_event: function () {\r\n            input_search.unbind('keyup');\r\n        }\r\n    };\r\n    jQuery(document).click(function (a) {\r\n        if ((searchWrapper.is(\":visible\") || searchWrapper.is(\":visible\")) && !a.target) searchWrapper.hide()\r\n    });\r\n    input_search.focus(function () {\r\n        event_ajax_search.bind_event();\r\n    }).blur(function () {\r\n        event_ajax_search.unbind_event();\r\n    });\r\n    function startSearch() {\r\n\r\n        jQuery.ajax({\r\n            url: 'http://www.xiami.com/search/json?t=1&k=' + input_search.val() + '&n=10&callback=jsonp978',\r\n            type: 'GET',\r\n            dataType: 'jsonp',\r\n            success: function (data) {\r\n                if (!data) console.log('sb');\r\n\r\n                var html = ''\r\n                for (var i = 0; i < data.length; i++) {\r\n                    var item = data[i]\r\n                    html += '<li class=\"add-xiamil\" data-id=\"' + item.song_id + '\"><div class=\"img\"><img width=\"30\" height=\"30\" alt=\"爱你\" src=\"http://img.xiami.net/' + item.album_logo + '\"></div><div class=\"name\"><p>' + item.song_name + '</p><p>' + item.artist_name + '</p></div><a class=\"play-btn\"></a></li>'\r\n                }\r\n                ;\r\n                html = '<div class=\"search-title\">歌曲</div><ul class=\"pads\">' + html + '</ul>';\r\n                searchWrapper.empty();\r\n                searchWrapper.html(html).show();\r\n            }\r\n        });\r\n    }\r\n\r\n});"]}