function grin(i){var t;if(i=" "+i+" ",!document.getElementById("comment")||"textarea"!=document.getElementById("comment").type)return!1;if(t=document.getElementById("comment"),document.selection){t.focus();var o=document.selection.createRange();o.text=i,t.focus()}else if(t.selectionStart||"0"==t.selectionStart){var e=t.selectionStart,n=t.selectionEnd,a=n;t.value=t.value.substring(0,e)+i+t.value.substring(n,t.value.length),a+=i.length,t.focus(),t.selectionStart=a,t.selectionEnd=a}else t.value+=i,t.focus()}var RikaSite=RikaSite||{};jQuery(document).ready(function(i){"use strict";RikaSite=function(){},RikaSite.prototype={init:function(){var t=this,o=i("#post .column--invisible .list--post");t.hoverSearchText(),t.initial(o),t.placeToolbar(960,60,20),t.ajaxPostLoading(),t.responsiveColumn(o),t.navDropDownClick(),t.navFilterClick(),t.menuScroll(),t.upperDownClick(),t.toolBarPlace(),t.dispalyMoblieMenu(),t.tagPost(),t.ScrollMenuMobile(),t.searchClick(),t.layoutSwitchClick(),t.rippleEffect(),t.filledField()},hoverSearchText:function(){i(".search-text .text").focus(function(){"找东西？"==i(this).val()&&i(this).val("")}).blur(function(){""==i(this).val()&&i(this).val("找东西？")})},initial:function(t){this.adjustColumnHeights(t.clone()),i(".column--post").addClass("stop--sliding")},responsiveColumn:function(o){i(window).resize({viewModel:t},function(i){var t=i.data.viewModel;t.adjustColumnHeights(o.clone())})},layoutSwitchClick:function(){i("i.icon-layout").on("click",function(){var t=i(this),o=t.hasClass("icon-th"),e=t.hasClass("icon-th-list");o&&!t.hasClass("active")?(i("#post").removeClass("list--view").addClass("grid--view"),void RikaSite.prototype.setCookie("layout",1),t.siblings(".icon-th-list").removeClass("active"),t.addClass("active"),i(".column--post.column--invisible").removeClass("column--invisible"),RikaSite.prototype.adjustColumnHeights(i("#post .column--invisible .list--post").clone()),i(".column--invisible").removeClass("column--show")):e&&!t.hasClass("active")&&(i("#post").removeClass("grid--view").addClass("list--view"),void RikaSite.prototype.setCookie("layout",2),t.siblings(".icon-th").removeClass("active"),t.addClass("active"),i(".column--invisible").addClass("column--show"),i(".column--post ").addClass("column--invisible"))})},adjustColumnHeights:function(t){i(".column--one").empty(),i(".column--two").empty(),i(".column--three").empty();var o=[],e=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},n=1420,a=768;o.push(i(".column--one")),e()>=a&&o.push(i(".column--two")),e()>=n&&o.push(i(".column--three"));for(var s=0;s<t.length;s++)this.getTargetColumn(o).append(t.eq(s).addClass("post--item").removeClass("list--post"))},getTargetColumn:function(i){for(var t=Number.MAX_VALUE,o=0;o<i.length;o++)if(i[o].outerHeight()<t){var e=i[o];t=i[o].outerHeight()}return e},tagPost:function(){i(document).on("mouseenter",".tag ul > li:first-child",function(t){t.stopPropagation(),i(this).parents("ul").addClass("show")}),i(document).on("click",".tag ul > li",function(i){i.stopPropagation()}),i(document).on("mouseleave",".tag ul",function(t){t.stopPropagation(),i(this).removeClass("show")})},placeToolbar:function(t,o,e){var n=parseInt((i(window).width()-t+1)/2-o-e);20>n&&(n=20),i(".right-toolbar").css({right:n,opacity:1})},ajaxPostLoading:function(){var o=window.location.href;i(document).on("click",".container > .navigation a",{viewModel:t},function(t){t.preventDefault();var e=t.data.viewModel,n=i(this).attr("href");e.turnpage(n),history.pushState(null,document.title,n),o=window.location.href}),window.addEventListener("popstate",{viewModel:t},function(i){var t=window.location.href,e=i.data.viewModel;o!=t&&(e.turnpage(t),o=t)})},turnpage:function(t){i(".pageload-overlay").addClass("show"),i("html,body").animate({scrollTop:0},300),i(".column--post").addClass("fading"),i(".column--invisible").addClass("fading"),i.ajax({url:t}).always(function(t){var o=i.parseHTML(t);i("#post").html(i("#post",o).html()),i(".navigation").html(i(".navigation",o).html()),i(".wp-post-image").on("load",function(){RikaSite.prototype.initial(i("#post .column--invisible .list--post")),RikaSite.prototype.responsiveColumn(i("#post .column--invisible .list--post"))})})},navDropDownClick:function(){i(document).on("click",".open-nav",function(t){t.stopPropagation(),i("#nav-filters").toggleClass("open"),i(".box-overlay").addClass("open")}),i(document).on("click",".close-nav",function(){i(".nav-sidebar").removeClass("open"),i(".box-overlay").removeClass("open")})},navFilterClick:function(){i(document).on("click",".wrapper-dropdown",function(){i(this).toggleClass("active"),i.stopPropagation()}),i(document).on("click",".nav-sidebar",function(i){i.stopPropagation()}),i(document).on("click",function(){i(".nav-sidebar").removeClass("open"),i(".box-overlay").removeClass("open")})},searchClick:function(){i(document).on("click",".bt-search",function(){i(".search-text").hasClass("visible")?i(".search-text").removeClass("visible"):i(".search-text").addClass("visible"),setTimeout(function(){i(".search-text .text").trigger("focus")},200),setTimeout(function(){i(".search-text").removeClass("visible")},1e4)})},menuScroll:function(){i(window).scroll(function(t){t.stopPropagation();var o=i(window).scrollTop();o>48?(i("nav.search").removeClass("open"),i("body").addClass("header-fixed"),i(".main").addClass("white-bg")):(i("nav.search").hasClass("visible")&&i("nav.search").addClass("open"),i("body").removeClass("header-fixed"),i(".main").removeClass("white-bg"))})},dispalyMoblieMenu:function(){i(document).on("click","#menu-mobile .bt-menu",{viewModel:t},function(){i("#menu-mobile").hasClass("open")?i("#menu-mobile").removeClass("open"):i("#menu-mobile").addClass("open")})},toolBarPlace:function(){var t=!1;i(window).scroll(function(o){o.stopPropagation(),t=i(window).scrollTop()>=i(document).height()-i(window).height(),t?(i(".tooltip-goto").find(".icon-vertical_align_bottom").hide(),i(".tooltip-goto").find(".icon-vertical_align_top").show()):(i(".tooltip-goto").find(".icon-vertical_align_top").hide(),i(".tooltip-goto").find(".icon-vertical_align_bottom").show())})},upperDownClick:function(){i(document).on("click",".right-toolbar .icon-vertical_align_top",function(){i("html, body").animate({scrollTop:0},500)}),i(document).on("click",".right-toolbar .icon-vertical_align_bottom",function(){i("html, body").animate({scrollTop:i("#page-wrap").height()},500)}),i(document).on("click",".right-toolbar .icon-question_answer",function(){i("html, body").animate({scrollTop:i("#respond").position().top},500)}),i(document).on("click",".right-toolbar .icon-bubble_chart",function(){i("html, body").animate({scrollTop:i(".share").position().top},500)})},ScrollMenuMobile:function(){setTimeout(function(){i(".wrapper-nav").css("height",i(window).height()+"px")},500),i(window).resize(function(){setTimeout(function(){i(".wrapper-nav").css("height",i(window).height()+"px")},500)})},setCookie:function(i,t){var o=new Date;o.setTime(o.getTime()+31536e6),document.cookie=i+"="+t+";path=/;expires="+o.toUTCString()},rippleEffect:function(){var t=i(".rika-ripple");t.on("click.ui.ripple",function(t){var o=i(this),e=o.parent().offset(),n=o.find(".c-ripple__circle"),a=t.pageX-e.left,s=t.pageY-e.top;n.css({top:s+"px",left:a+"px"}),o.addClass("is-active")}),t.on("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(){i(this).removeClass("is-active")})},filledField:function(){var t=i(".rika-textfield");t.on("change",function(){i(this).children("input").val()?i(this).children("input").hasClass("is-filled")||i(this).children("input").addClass("is-filled"):i(this).children("input").hasClass("is-filled")&&i(this).children("input").removeClass("is-filled")})}};var t=new RikaSite;t.init()}),jQuery(document).ready(function(){function i(){jQuery.ajax({url:"http://www.xiami.com/search/json?t=1&k="+t.val()+"&n=10&callback=jsonp978",type:"GET",dataType:"jsonp",success:function(i){i||console.log("sb");for(var t="",o=0;o<i.length;o++){var n=i[o];t+='<li class="add-xiamil" data-id="'+n.song_id+'"><div class="img"><img width="30" height="30" alt="爱你" src="http://img.xiami.net/'+n.album_logo+'"></div><div class="name"><p>'+n.song_name+"</p><p>"+n.artist_name+'</p></div><a class="play-btn"></a></li>'}t='<div class="search-title">歌曲</div><ul class="pads">'+t+"</ul>",e.empty(),e.html(t).show()}})}var t,o,t=jQuery(".js-search-input"),e=jQuery(".js-search-results"),n={bind_event:function(){t.bind("keyup",function(){""!=t.val()?(o&&clearTimeout(o),o=setTimeout(i,500)):""==t.val()&&e.empty().hide()})},unbind_event:function(){t.unbind("keyup")}};jQuery(document).click(function(i){!e.is(":visible")&&!e.is(":visible")||i.target||e.hide()}),t.focus(function(){n.bind_event()}).blur(function(){n.unbind_event()})});
//# sourceMappingURL=app.js.map
