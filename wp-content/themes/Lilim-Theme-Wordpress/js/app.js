function grin(o){var i;if(o=" "+o+" ",!document.getElementById("comment")||"textarea"!=document.getElementById("comment").type)return!1;if(i=document.getElementById("comment"),document.selection){i.focus();var e=document.selection.createRange();e.text=o,i.focus()}else if(i.selectionStart||"0"==i.selectionStart){var t=i.selectionStart,n=i.selectionEnd,a=n;i.value=i.value.substring(0,t)+o+i.value.substring(n,i.value.length),a+=o.length,i.focus(),i.selectionStart=a,i.selectionEnd=a}else i.value+=o,i.focus()}var RikaSite=RikaSite||{};jQuery(document).ready(function(o){"use strict";RikaSite=function(){},RikaSite.prototype={init:function(){var i=this,e=o("#post .column--invisible .list--post");i.triggerSearch(),i.triggerMenu(),i.triggerSubmenu(),i.initial(e),i.placeToolbar(960,60,20),i.ajaxPostLoading(),i.responsiveColumn(e),i.navDropDownClick(),i.navFilterClick(),i.menuScroll(),i.upperDownClick(),i.toolBarPlace(),i.dispalyMoblieMenu(),i.tagPost(),i.ScrollMenuMobile(),i.searchClick(),i.layoutSwitchClick(),i.rippleEffect(),i.filledField()},triggerSearch:function(){o(".js-search").on("click",function(){o(".header__search").addClass("show"),o(".overlay-content").addClass("show")}),o(".header__search__close").on("click",function(){o(".header__search").removeClass("show"),o(".overlay-content").removeClass("show")}),o(".overlay-content").on("click",function(){o(".header__search").removeClass("show"),o(".overlay-content").removeClass("show")})},triggerMenu:function(){o(".wrapper").on("click",function(){o("body").removeClass("nav-sidebar-open")}),o(".nav-main").on("click",function(o){o.stopPropagation()}),o(".js-nav-main").on("click",function(){return o("body").toggleClass("nav-sidebar-open"),!1})},triggerSubmenu:function(){o("li.menu-item-has-children a").on("click",function(i){i.stopPropagation(),o(this).siblings(".sub-menu").slideToggle()})},initial:function(i){this.adjustColumnHeights(i.clone()),o(".column--post").addClass("stop--sliding")},responsiveColumn:function(e){o(window).resize({viewModel:i},function(o){var i=o.data.viewModel;i.adjustColumnHeights(e.clone())})},layoutSwitchClick:function(){o("i.icon-layout").on("click",function(){var i=o(this),e=i.hasClass("icon-th"),t=i.hasClass("icon-th-list");e&&!i.hasClass("active")?(o("#post").removeClass("list--view").addClass("grid--view"),void RikaSite.prototype.setCookie("layout",1),i.siblings(".icon-th-list").removeClass("active"),i.addClass("active"),o(".column--post.column--invisible").removeClass("column--invisible"),RikaSite.prototype.adjustColumnHeights(o("#post .column--invisible .list--post").clone()),o(".column--invisible").removeClass("column--show")):t&&!i.hasClass("active")&&(o("#post").removeClass("grid--view").addClass("list--view"),void RikaSite.prototype.setCookie("layout",2),i.siblings(".icon-th").removeClass("active"),i.addClass("active"),o(".column--invisible").addClass("column--show"),o(".column--post ").addClass("column--invisible"))})},adjustColumnHeights:function(i){o(".column--one").empty(),o(".column--two").empty(),o(".column--three").empty();var e=[],t=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},n=1420,a=768;e.push(o(".column--one")),t()>=a&&e.push(o(".column--two")),t()>=n&&e.push(o(".column--three"));for(var s=0;s<i.length;s++)this.getTargetColumn(e).append(i.eq(s).addClass("post--item").removeClass("list--post"))},getTargetColumn:function(o){for(var i=Number.MAX_VALUE,e=0;e<o.length;e++)if(o[e].outerHeight()<i){var t=o[e];i=o[e].outerHeight()}return t},tagPost:function(){o(document).on("mouseenter",".tag ul > li:first-child",function(i){i.stopPropagation(),o(this).parents("ul").addClass("show")}),o(document).on("click",".tag ul > li",function(o){o.stopPropagation()}),o(document).on("mouseleave",".tag ul",function(i){i.stopPropagation(),o(this).removeClass("show")})},placeToolbar:function(i,e,t){var n=parseInt((o(window).width()-i+1)/2-e-t);20>n&&(n=20),o(".right-toolbar").css({right:n,opacity:1})},ajaxPostLoading:function(){var e=window.location.href;o(document).on("click",".container > .navigation a",{viewModel:i},function(i){i.preventDefault();var t=i.data.viewModel,n=o(this).attr("href");t.turnpage(n),history.pushState(null,document.title,n),e=window.location.href}),window.addEventListener("popstate",{viewModel:i},function(o){var i=window.location.href,t=o.data.viewModel;e!=i&&(t.turnpage(i),e=i)})},turnpage:function(i){o(".pageload-overlay").addClass("show"),o("html,body").animate({scrollTop:0},300),o(".column--post").addClass("fading"),o(".column--invisible").addClass("fading"),o.ajax({url:i}).always(function(i){var e=o.parseHTML(i);o("#post").html(o("#post",e).html()),o(".navigation").html(o(".navigation",e).html()),o(".wp-post-image").on("load",function(){RikaSite.prototype.initial(o("#post .column--invisible .list--post")),RikaSite.prototype.responsiveColumn(o("#post .column--invisible .list--post"))})})},navDropDownClick:function(){o(document).on("click",".open-nav",function(i){i.stopPropagation(),o("#nav-filters").toggleClass("open"),o(".box-overlay").addClass("open")}),o(document).on("click",".close-nav",function(){o(".nav-sidebar").removeClass("open"),o(".box-overlay").removeClass("open")})},navFilterClick:function(){o(document).on("click",".wrapper-dropdown",function(){o(this).toggleClass("active"),o.stopPropagation()}),o(document).on("click",".nav-sidebar",function(o){o.stopPropagation()}),o(document).on("click",function(){o(".nav-sidebar").removeClass("open"),o(".box-overlay").removeClass("open")})},searchClick:function(){o(document).on("click",".bt-search",function(){o(".search-text").hasClass("visible")?o(".search-text").removeClass("visible"):o(".search-text").addClass("visible"),setTimeout(function(){o(".search-text .text").trigger("focus")},200),setTimeout(function(){o(".search-text").removeClass("visible")},1e4)})},menuScroll:function(){o(window).scroll(function(i){i.stopPropagation();var e=o(window).scrollTop();e>48?(o("nav.search").removeClass("open"),o(".main").addClass("white-bg")):(o("nav.search").hasClass("visible")&&o("nav.search").addClass("open"),o(".main").removeClass("white-bg"))})},dispalyMoblieMenu:function(){o(document).on("click","#menu-mobile .bt-menu",{viewModel:i},function(){o("#menu-mobile").hasClass("open")?o("#menu-mobile").removeClass("open"):o("#menu-mobile").addClass("open")})},toolBarPlace:function(){var i=!1;o(window).scroll(function(e){e.stopPropagation(),i=o(window).scrollTop()>=o(document).height()-o(window).height(),i?(o(".tooltip-goto").find(".icon-vertical_align_bottom").hide(),o(".tooltip-goto").find(".icon-vertical_align_top").show()):(o(".tooltip-goto").find(".icon-vertical_align_top").hide(),o(".tooltip-goto").find(".icon-vertical_align_bottom").show())})},upperDownClick:function(){o(document).on("click",".right-toolbar .icon-vertical_align_top",function(){o("html, body").animate({scrollTop:0},500)}),o(document).on("click",".right-toolbar .icon-vertical_align_bottom",function(){o("html, body").animate({scrollTop:o("#page-wrap").height()},500)}),o(document).on("click",".right-toolbar .icon-question_answer",function(){o("html, body").animate({scrollTop:o("#respond").position().top},500)}),o(document).on("click",".right-toolbar .icon-bubble_chart",function(){o("html, body").animate({scrollTop:o(".share").position().top},500)})},ScrollMenuMobile:function(){setTimeout(function(){o(".wrapper-nav").css("height",o(window).height()+"px")},500),o(window).resize(function(){setTimeout(function(){o(".wrapper-nav").css("height",o(window).height()+"px")},500)})},setCookie:function(o,i){var e=new Date;e.setTime(e.getTime()+31536e6),document.cookie=o+"="+i+";path=/;expires="+e.toUTCString()},rippleEffect:function(){var i=o(".rika-ripple");i.on("click.ui.ripple",function(i){var e=o(this),t=e.parent().offset(),n=e.find(".c-ripple__circle"),a=i.pageX-t.left,s=i.pageY-t.top;n.css({top:s+"px",left:a+"px"}),e.addClass("is-active")}),i.on("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(){o(this).removeClass("is-active")})},filledField:function(){var i=o(".rika-textfield");i.on("change",function(){o(this).children("input").val()?o(this).children("input").hasClass("is-filled")||o(this).children("input").addClass("is-filled"):o(this).children("input").hasClass("is-filled")&&o(this).children("input").removeClass("is-filled")})}};var i=new RikaSite;i.init()}),jQuery(document).ready(function(){function o(){jQuery.ajax({url:"http://www.xiami.com/search/json?t=1&k="+i.val()+"&n=10&callback=jsonp978",type:"GET",dataType:"jsonp",success:function(o){o||console.log("sb");for(var i="",e=0;e<o.length;e++){var n=o[e];i+='<li class="add-xiamil" data-id="'+n.song_id+'"><div class="img"><img width="30" height="30" alt="爱你" src="http://img.xiami.net/'+n.album_logo+'"></div><div class="name"><p>'+n.song_name+"</p><p>"+n.artist_name+'</p></div><a class="play-btn"></a></li>'}i='<div class="search-title">歌曲</div><ul class="pads">'+i+"</ul>",t.empty(),t.html(i).show()}})}var i,e,i=jQuery(".js-search-input"),t=jQuery(".js-search-results"),n={bind_event:function(){i.bind("keyup",function(){""!=i.val()?(e&&clearTimeout(e),e=setTimeout(o,500)):""==i.val()&&t.empty().hide()})},unbind_event:function(){i.unbind("keyup")}};jQuery(document).click(function(o){!t.is(":visible")&&!t.is(":visible")||o.target||t.hide()}),i.focus(function(){n.bind_event()}).blur(function(){n.unbind_event()})});
//# sourceMappingURL=app.js.map
