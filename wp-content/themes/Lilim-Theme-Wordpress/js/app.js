function grin(e){var o;if(e=" "+e+" ",!document.getElementById("comment")||"textarea"!=document.getElementById("comment").type)return!1;if(o=document.getElementById("comment"),document.selection){o.focus();var n=document.selection.createRange();n.text=e,o.focus()}else if(o.selectionStart||"0"==o.selectionStart){var t=o.selectionStart,i=o.selectionEnd,a=i;o.value=o.value.substring(0,t)+e+o.value.substring(i,o.value.length),a+=e.length,o.focus(),o.selectionStart=a,o.selectionEnd=a}else o.value+=e,o.focus()}var RikaSite=RikaSite||{};jQuery(document).ready(function(e){"use strict";RikaSite=function(){},RikaSite.prototype={init:function(){var o=this,n=e("#post .column--invisible .list--post");o.triggerSearch(),o.triggerMenu(),o.triggerSubmenu(),o.initial(n),o.placeToolbar(960,60,20),o.ajaxPostLoading(),o.responsiveColumn(n),o.navDropDownClick(),o.navFilterClick(),o.menuScroll(),o.upperDownClick(),o.toolBarPlace(),o.dispalyMoblieMenu(),o.tagPost(),o.ScrollMenuMobile(),o.searchClick(),o.rippleEffect(),o.filledField()},triggerSearch:function(){e(".js-search").on("click",function(){e(".header__search").addClass("show"),e(".overlay-content").addClass("show")}),e(".header__search__close").on("click",function(){e(".header__search").removeClass("show"),e(".overlay-content").removeClass("show")}),e(".overlay-content").on("click",function(){e(".header__search").removeClass("show"),e(".overlay-content").removeClass("show")})},triggerMenu:function(){e(".wrapper").on("click",function(){e("body").removeClass("nav-sidebar-open")}),e(".nav-main").on("click",function(e){e.stopPropagation()}),e(".js-nav-main").on("click",function(){return e("body").toggleClass("nav-sidebar-open"),!1})},triggerSubmenu:function(){e("li.menu-item-has-children a").on("click",function(o){o.stopPropagation(),e(this).siblings(".sub-menu").slideToggle()})},initial:function(o){this.adjustColumnHeights(o.clone()),e(".column--post").addClass("stop--sliding")},responsiveColumn:function(n){e(window).resize({viewModel:o},function(e){var o=e.data.viewModel;o.adjustColumnHeights(n.clone())})},adjustColumnHeights:function(o){e(".column--one").empty(),e(".column--two").empty(),e(".column--three").empty();var n=[],t=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},i=1420,a=768;n.push(e(".column--one")),t()>=a&&n.push(e(".column--two")),t()>=i&&n.push(e(".column--three"));for(var l=0;l<o.length;l++)this.getTargetColumn(n).append(o.eq(l).addClass("post--item").removeClass("list--post"))},getTargetColumn:function(e){for(var o=Number.MAX_VALUE,n=0;n<e.length;n++)if(e[n].outerHeight()<o){var t=e[n];o=e[n].outerHeight()}return t},tagPost:function(){e(document).on("mouseenter",".tag ul > li:first-child",function(o){o.stopPropagation(),e(this).parents("ul").addClass("show")}),e(document).on("click",".tag ul > li",function(e){e.stopPropagation()}),e(document).on("mouseleave",".tag ul",function(o){o.stopPropagation(),e(this).removeClass("show")})},placeToolbar:function(o,n,t){var i=parseInt((e(window).width()-o+1)/2-n-t);20>i&&(i=20),e(".right-toolbar").css({right:i,opacity:1})},ajaxPostLoading:function(){var n=window.location.href;e(document).on("click",".container > .navigation a",{viewModel:o},function(o){o.preventDefault();var t=o.data.viewModel,i=e(this).attr("href");t.turnpage(i),history.pushState(null,document.title,i),n=window.location.href}),window.addEventListener("popstate",{viewModel:o},function(e){var o=window.location.href,t=e.data.viewModel;n!=o&&(t.turnpage(o),n=o)})},turnpage:function(o){e(".pageload-overlay").addClass("show"),e("html,body").animate({scrollTop:0},300),e(".column--post").addClass("fading"),e(".column--invisible").addClass("fading"),e.ajax({url:o}).always(function(o){var n=e.parseHTML(o);e("#post").html(e("#post",n).html()),e(".navigation").html(e(".navigation",n).html()),e(".wp-post-image").on("load",function(){RikaSite.prototype.initial(e("#post .column--invisible .list--post")),RikaSite.prototype.responsiveColumn(e("#post .column--invisible .list--post"))})})},navDropDownClick:function(){e(document).on("click",".open-nav",function(o){o.stopPropagation(),e("#nav-filters").toggleClass("open"),e(".box-overlay").addClass("open")}),e(document).on("click",".close-nav",function(){e(".nav-sidebar").removeClass("open"),e(".box-overlay").removeClass("open")})},navFilterClick:function(){e(document).on("click",".wrapper-dropdown",function(){e(this).toggleClass("active"),e.stopPropagation()}),e(document).on("click",".nav-sidebar",function(e){e.stopPropagation()}),e(document).on("click",function(){e(".nav-sidebar").removeClass("open"),e(".box-overlay").removeClass("open")})},searchClick:function(){e(document).on("click",".bt-search",function(){e(".search-text").hasClass("visible")?e(".search-text").removeClass("visible"):e(".search-text").addClass("visible"),setTimeout(function(){e(".search-text .text").trigger("focus")},200),setTimeout(function(){e(".search-text").removeClass("visible")},1e4)})},menuScroll:function(){e(window).scroll(function(o){o.stopPropagation();var n=e(window).scrollTop();n>69?e("header.header").addClass("header--fixed"):e("header.header").removeClass("header--fixed")})},dispalyMoblieMenu:function(){e(document).on("click","#menu-mobile .bt-menu",{viewModel:o},function(){e("#menu-mobile").hasClass("open")?e("#menu-mobile").removeClass("open"):e("#menu-mobile").addClass("open")})},toolBarPlace:function(){var o=!1;e(window).scroll(function(n){n.stopPropagation(),o=e(window).scrollTop()>=e(document).height()-e(window).height(),o?(e(".tooltip-goto").find(".icon-vertical_align_bottom").hide(),e(".tooltip-goto").find(".icon-vertical_align_top").show()):(e(".tooltip-goto").find(".icon-vertical_align_top").hide(),e(".tooltip-goto").find(".icon-vertical_align_bottom").show())})},upperDownClick:function(){e(document).on("click",".right-toolbar .icon-vertical_align_top",function(){e("html, body").animate({scrollTop:0},500)}),e(document).on("click",".right-toolbar .icon-vertical_align_bottom",function(){e("html, body").animate({scrollTop:e("#page-wrap").height()},500)}),e(document).on("click",".right-toolbar .icon-question_answer",function(){e("html, body").animate({scrollTop:e("#respond").position().top},500)}),e(document).on("click",".right-toolbar .icon-bubble_chart",function(){e("html, body").animate({scrollTop:e(".share").position().top},500)})},ScrollMenuMobile:function(){setTimeout(function(){e(".wrapper-nav").css("height",e(window).height()+"px")},500),e(window).resize(function(){setTimeout(function(){e(".wrapper-nav").css("height",e(window).height()+"px")},500)})},setCookie:function(e,o){var n=new Date;n.setTime(n.getTime()+31536e6),document.cookie=e+"="+o+";path=/;expires="+n.toUTCString()},rippleEffect:function(){var o=e(".rika-ripple");o.on("click.ui.ripple",function(o){var n=e(this),t=n.parent().offset(),i=n.find(".c-ripple__circle"),a=o.pageX-t.left,l=o.pageY-t.top;i.css({top:l+"px",left:a+"px"}),n.addClass("is-active")}),o.on("animationend webkitAnimationEnd oanimationend MSAnimationEnd",function(){e(this).removeClass("is-active")})},filledField:function(){var o=e(".rika-textfield");o.on("change",function(){e(this).children("input").val()?e(this).children("input").hasClass("is-filled")||e(this).children("input").addClass("is-filled"):e(this).children("input").hasClass("is-filled")&&e(this).children("input").removeClass("is-filled")})}};var o=new RikaSite;o.init()}),jQuery(document).ready(function(){function e(){jQuery.ajax({url:"http://www.xiami.com/search/json?t=1&k="+o.val()+"&n=10&callback=jsonp978",type:"GET",dataType:"jsonp",success:function(e){e||console.log("sb");for(var o="",n=0;n<e.length;n++){var i=e[n];o+='<li class="add-xiamil" data-id="'+i.song_id+'"><div class="img"><img width="30" height="30" alt="爱你" src="http://img.xiami.net/'+i.album_logo+'"></div><div class="name"><p>'+i.song_name+"</p><p>"+i.artist_name+'</p></div><a class="play-btn"></a></li>'}o='<div class="search-title">歌曲</div><ul class="pads">'+o+"</ul>",t.empty(),t.html(o).show()}})}var o,n,o=jQuery(".js-search-input"),t=jQuery(".js-search-results"),i={bind_event:function(){o.bind("keyup",function(){""!=o.val()?(n&&clearTimeout(n),n=setTimeout(e,500)):""==o.val()&&t.empty().hide()})},unbind_event:function(){o.unbind("keyup")}};jQuery(document).click(function(e){!t.is(":visible")&&!t.is(":visible")||e.target||t.hide()}),o.focus(function(){i.bind_event()}).blur(function(){i.unbind_event()})});
//# sourceMappingURL=app.js.map
